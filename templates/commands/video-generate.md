---
description: 生成完整的60秒短视频
scripts:
  sh: .specify/scripts/bash/generate-video.sh --json "{ARGS}"
  ps: .specify/scripts/powershell/generate-video.ps1 -Json "{ARGS}"
---

根据提供的场景和需求生成完整的 60 秒短视频（含音频和字幕）：

1. 运行脚本 `{SCRIPT}` 并解析 JSON 输出，获取 PROJECT_NAME 和 OUTPUT_PATH
   **重要**：脚本只运行一次，JSON 输出会显示在终端
2. 分析视频需求：
   - 目标平台（抖音/视频号/快手）
   - 视频风格（幽默/正经/煽情/教育）
   - 角色设定（Q版/真人/动画）
3. 并行处理三个流程：
   a. **视频生成**（即梦AI）：
   - **片段1（0-10秒）**：开场介绍，抓住注意力
   - **片段2（10-20秒）**：背景介绍，建立场景
   - **片段3（20-30秒）**：冲突展开，制造张力
   - **片段4（30-40秒）**：高潮部分，情绪顶点
   - **片段5（40-50秒）**：解决方案，释放张力
   - **片段6（50-60秒）**：结尾总结，行动召唤
   b. **音频生成**（TTS服务）：
      - 检测可用TTS引擎（edge-tts/macOS say）
      - 根据场景文本生成语音
      - 添加适合的背景音乐
   c. **字幕生成**：
      - 生成ASS格式字幕文件
      - 设置样式（字体、颜色、位置）
      - 确保时间轴精准同步

4. 视频片段并行处理策略：
   - 第一批：片段1-3（同时提交3个任务）
   - 第二批：片段4-6（等第一批完成后提交）
5. 最终合成：
   - 使用FFmpeg合并6个视频片段
   - 添加音频轨道
   - 烧录字幕到视频
   - 添加转场效果（淡入淡出）
   - 调整为目标平台格式（1088×1920竖屏）
   - 确保音视频同步
6. 输出到 OUTPUT_PATH，准备发布

生成要点：
- 每个视频片段严格控制在10秒（241帧）
- 视频任务并发不超过3个，避免API限流
- 音频和字幕可并行生成
- 提示词要具体、生动、富含细节
- 保持视觉风格一致性
- 确保音视频时间轴同步