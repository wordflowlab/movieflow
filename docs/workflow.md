# MovieFlow å·¥ä½œæµç¨‹æŒ‡å—

æœ¬æŒ‡å—è¯¦ç»†ä»‹ç»ä½¿ç”¨ MovieFlow åˆ›å»º AI çŸ­è§†é¢‘çš„å®Œæ•´æµç¨‹ã€‚MovieFlow å‚è€ƒ Spec-Kit çš„æ–¹æ³•è®ºï¼Œå°†è§„æ ¼é©±åŠ¨å¼€å‘ï¼ˆSDDï¼‰ç†å¿µåº”ç”¨äºè§†é¢‘ç”Ÿæˆé¢†åŸŸã€‚

## æ ¸å¿ƒç†å¿µ

### è§„æ ¼é©±åŠ¨è§†é¢‘ç”Ÿæˆï¼ˆSpec-Driven Video Generationï¼‰

å‚è€ƒ Spec-Kit çš„ SDD æ–¹æ³•è®ºï¼ŒMovieFlow é‡‡ç”¨åˆ†å±‚é€’è¿›çš„åˆ›ä½œæ¨¡å¼ï¼š

1. **è§„æ ¼å®šä¹‰**ï¼ˆ/video-specifyï¼‰ï¼šå®šä¹‰è§†é¢‘çš„æ•´ä½“è§„æ ¼ï¼ˆä¸»é¢˜ã€é£æ ¼ã€ç›®æ ‡ï¼‰
2. **è®¡åˆ’åˆ¶å®š**ï¼ˆ/video-planï¼‰ï¼šå°†è§„æ ¼ç»†åŒ–ä¸ºæŠ€æœ¯å®ç°æ–¹æ¡ˆ
3. **ä»»åŠ¡åˆ†è§£**ï¼ˆ/video-tasksï¼‰ï¼šå°†è®¡åˆ’åˆ†è§£ä¸ºå…·ä½“çš„ç”Ÿæˆä»»åŠ¡
4. **è§†é¢‘ç”Ÿæˆ**ï¼ˆ/video-generateï¼‰ï¼šæ‰§è¡Œä»»åŠ¡ï¼Œç”Ÿæˆè§†é¢‘å†…å®¹

## å·¥ä½œæµç¨‹æ¦‚è§ˆï¼ˆå«æ¸è¿›å¼éªŒè¯ï¼‰ğŸ†•

```mermaid
graph TD
    A[ç”¨æˆ·æè¿°] --> B[/video-specify<br/>è§†é¢‘è§„æ ¼]
    B --> C[/video-plan<br/>æŠ€æœ¯æ–¹æ¡ˆ]
    C --> D[/video-validate<br/>L0+L1éªŒè¯]
    D --> E{éªŒè¯é€šè¿‡?}
    E -->|å¦| B
    E -->|æ˜¯| F[/video-tasks<br/>ä»»åŠ¡åˆ†è§£]
    F --> G[/video-preview<br/>L2åŠ¨æ€é¢„è§ˆ]
    G --> H{æ•ˆæœæ»¡æ„?}
    H -->|å¦| B
    H -->|æ˜¯| I[/video-generate<br/>å®Œæ•´ç”Ÿæˆ]
    I --> J[è´¨é‡æ£€æŸ¥]
    J --> K[å‘å¸ƒè¾“å‡º]

    style B fill:#f9f,stroke:#333,stroke-width:2px
    style C fill:#bbf,stroke:#333,stroke-width:2px
    style D fill:#9f9,stroke:#333,stroke-width:2px
    style F fill:#bfb,stroke:#333,stroke-width:2px
    style G fill:#9ff,stroke:#333,stroke-width:2px
    style I fill:#ffb,stroke:#333,stroke-width:2px
```

### æˆæœ¬ä¼˜åŒ–è·¯å¾„

- **ä¼ ç»Ÿæµç¨‹**ï¼šç›´æ¥ç”Ÿæˆ â†’ ä¸æ»¡æ„ â†’ é‡æ–°ç”Ÿæˆï¼ˆæ¯æ¬¡170å…ƒï¼‰
- **æ¸è¿›å¼æµç¨‹**ï¼šL0ï¼ˆå…è´¹ï¼‰â†’ L1ï¼ˆ6å…ƒï¼‰â†’ L2ï¼ˆ28å…ƒï¼‰â†’ æœ€ç»ˆç”Ÿæˆï¼ˆ170å…ƒï¼‰
- **èŠ‚çœæˆæœ¬**ï¼š59-76%

## é˜¶æ®µä¸€ï¼šéœ€æ±‚åˆ†æä¸è§„æ ¼å®šä¹‰

### 1.1 ä½¿ç”¨ /video-specify å‘½ä»¤

è¯¥å‘½ä»¤å°†ç”¨æˆ·çš„è§†é¢‘éœ€æ±‚è½¬åŒ–ä¸ºç»“æ„åŒ–çš„è§„æ ¼æ–‡æ¡£ã€‚

```bash
movieflow video-specify "åˆ›å»ºä¸€ä¸ª30ç§’çš„äº§å“ä»‹ç»è§†é¢‘ï¼Œå±•ç¤ºæˆ‘ä»¬çš„å¥åº·ç®¡ç†APP"
```

#### è¾“å…¥åˆ†æ

ç³»ç»Ÿä¼šä»ç”¨æˆ·æè¿°ä¸­æå–ï¼š
- **è§†é¢‘æ—¶é•¿**ï¼š30ç§’ï¼ˆå¦‚æœªæŒ‡å®šï¼Œé»˜è®¤60ç§’ï¼‰
- **è§†é¢‘ç±»å‹**ï¼šäº§å“ä»‹ç»
- **æ ¸å¿ƒä¸»é¢˜**ï¼šå¥åº·ç®¡ç†APP
- **ç›®æ ‡å—ä¼—**ï¼šæ½œåœ¨ç”¨æˆ·ï¼ˆæ¨æ–­ï¼‰

#### è¾“å‡ºè§„æ ¼

ç”Ÿæˆ `specs/001-health-app-intro/spec.md`ï¼š

```markdown
# è§†é¢‘è§„æ ¼ï¼šå¥åº·ç®¡ç†APPä»‹ç»

## æ ¸å¿ƒä¿¡æ¯
- **æ—¶é•¿**ï¼š30ç§’
- **ç±»å‹**ï¼šäº§å“æ¼”ç¤º
- **å¹³å°**ï¼šæŠ–éŸ³/è§†é¢‘å·/Bç«™
- **ç›®æ ‡**ï¼šå¸å¼•ä¸‹è½½ï¼Œå±•ç¤ºæ ¸å¿ƒåŠŸèƒ½

## åœºæ™¯åˆ†è§£ï¼ˆ6Ã—5ç§’ï¼‰
1. **å¼€åœºé’©å­**ï¼ˆ0-5ç§’ï¼‰
   - ç—›ç‚¹å±•ç¤ºï¼šç°ä»£äººå¥åº·å›°æ‰°
   - è§†è§‰ï¼šå¿«èŠ‚å¥åŸå¸‚ç”Ÿæ´»é•œå¤´

2. **äº§å“å¼•å…¥**ï¼ˆ5-10ç§’ï¼‰
   - å±•ç¤ºAPPç•Œé¢
   - çªå‡ºLOGOå’Œåç§°

3. **æ ¸å¿ƒåŠŸèƒ½1**ï¼ˆ10-15ç§’ï¼‰
   - å¥åº·æ•°æ®è¿½è¸ª
   - åŠ¨ç”»å±•ç¤ºæ•°æ®å¯è§†åŒ–

4. **æ ¸å¿ƒåŠŸèƒ½2**ï¼ˆ15-20ç§’ï¼‰
   - AIå¥åº·å»ºè®®
   - å±•ç¤ºä¸ªæ€§åŒ–æ¨è

5. **ç”¨æˆ·è§è¯**ï¼ˆ20-25ç§’ï¼‰
   - çœŸå®ç”¨æˆ·åé¦ˆ
   - æ•°æ®æ”¹å–„å¯¹æ¯”

6. **è¡ŒåŠ¨å·å¬**ï¼ˆ25-30ç§’ï¼‰
   - ä¸‹è½½äºŒç»´ç 
   - é™æ—¶ä¼˜æƒ ä¿¡æ¯

## å¾…ç¡®è®¤é¡¹
[NEEDS CLARIFICATION: APPå…·ä½“åç§°]
[NEEDS CLARIFICATION: å“ç‰Œè‰²å½©æ–¹æ¡ˆ]
[NEEDS CLARIFICATION: ç›®æ ‡ç”¨æˆ·å¹´é¾„æ®µ]
```

### 1.2 è§„æ ¼ä¼˜åŒ–å»ºè®®

ç³»ç»Ÿä¼šæ ¹æ®æœ€ä½³å®è·µæä¾›ä¼˜åŒ–å»ºè®®ï¼š

```yaml
optimizations:
  - hook_strength: "å¢å¼ºå‰3ç§’å¸å¼•åŠ›"
  - cta_clarity: "æ˜ç¡®è¡ŒåŠ¨å·å¬"
  - platform_adaptation: "é’ˆå¯¹ä¸åŒå¹³å°ä¼˜åŒ–"
```

## é˜¶æ®µäºŒï¼šæŠ€æœ¯æ–¹æ¡ˆè§„åˆ’

### 2.1 ä½¿ç”¨ /video-plan å‘½ä»¤

å°†è§„æ ¼è½¬åŒ–ä¸ºå…·ä½“çš„æŠ€æœ¯å®ç°æ–¹æ¡ˆã€‚

```bash
movieflow video-plan specs/001-health-app-intro
```

#### ç”Ÿæˆå†…å®¹

åˆ›å»º `specs/001-health-app-intro/plan.md`ï¼š

```markdown
# æŠ€æœ¯å®ç°æ–¹æ¡ˆ

## åœºæ™¯ç”Ÿæˆç­–ç•¥

### åœºæ™¯1ï¼šå¼€åœºé’©å­
- **ç”Ÿæˆæ–¹å¼**ï¼šGemini 2.5 Flash
- **æç¤ºè¯**ï¼š
  ```
  ç°ä»£éƒ½å¸‚å¿«èŠ‚å¥ç”Ÿæ´»ï¼Œå‹åŠ›å¤§çš„ä¸Šç­æ—ï¼Œ
  ç–²æƒ«è¡¨æƒ…ï¼Œæ˜æš—åŠå…¬å®¤ï¼Œå‡Œæ™¨åŠ ç­åœºæ™¯ï¼Œ
  å†™å®é£æ ¼ï¼Œå†·è‰²è°ƒï¼Œç”µå½±çº§ç”»é¢
  ```
- **è½¬åœº**ï¼šå¿«é€Ÿå‰ªåˆ‡

### åœºæ™¯2ï¼šäº§å“å¼•å…¥
- **ç”Ÿæˆæ–¹å¼**ï¼šç«å±±å¼•æ“-ç•Œé¢åŠ¨ç”»
- **ç´ æå‡†å¤‡**ï¼š
  - APPæˆªå›¾ï¼ˆéœ€ç”¨æˆ·æä¾›ï¼‰
  - LOGOåŠ¨ç”»ï¼ˆAEæ¨¡æ¿ï¼‰
- **ç‰¹æ•ˆ**ï¼šå…‰æ•ˆæ‰«è¿‡

[ç»§ç»­å…¶ä»–åœºæ™¯...]

## éŸ³é¢‘æ–¹æ¡ˆ

### èƒŒæ™¯éŸ³ä¹
- **é£æ ¼**ï¼šç§‘æŠ€æ„Ÿã€è½»å¿«
- **èŠ‚å¥**ï¼š120-130 BPM
- **æƒ…ç»ªæ›²çº¿**ï¼šå¹³é™â†’ä¸Šæ‰¬â†’é«˜æ½®

### é…éŸ³æ–‡æ¡ˆ
```
åœºæ™¯1ï¼šè¿˜åœ¨ä¸ºå¥åº·é—®é¢˜å›°æ‰°å—ï¼Ÿ
åœºæ™¯2ï¼šè¯•è¯•ã€APPåç§°ã€‘ï¼Œæ‚¨çš„å¥åº·ç®¡å®¶
åœºæ™¯3ï¼šå®æ—¶ç›‘æµ‹ï¼Œæ•°æ®å¯è§†åŒ–
åœºæ™¯4ï¼šAIåˆ†æï¼Œä¸ªæ€§åŒ–å»ºè®®
åœºæ™¯5ï¼šå·²å¸®åŠ©10ä¸‡+ç”¨æˆ·æ”¹å–„å¥åº·
åœºæ™¯6ï¼šç«‹å³ä¸‹è½½ï¼Œäº«æ–°ç”¨æˆ·ä¸“å±ä¼˜æƒ 
```

## æŠ€æœ¯å‚æ•°

### è§†é¢‘è§„æ ¼
- åˆ†è¾¨ç‡ï¼š1080x1920ï¼ˆç«–å±ï¼‰/ 1920x1080ï¼ˆæ¨ªå±ï¼‰
- å¸§ç‡ï¼š30fps
- ç¼–ç ï¼šH.264
- æ¯”ç‰¹ç‡ï¼š8Mbps

### ç”Ÿæˆé…ç½®
```json
{
  "volcano_engine": {
    "model": "video-generation-v2",
    "quality": "high",
    "style": "realistic"
  },
  "gemini": {
    "model": "gemini-2.5-flash",
    "image_size": "1920x1080",
    "steps": 50
  }
}
```
```

## é˜¶æ®µä¸‰ï¼šæ¸è¿›å¼éªŒè¯ï¼ˆèŠ‚çœ80%æˆæœ¬ï¼‰ğŸ†•

### 3.1 L0çº§éªŒè¯ - æç¤ºè¯è´¨é‡åˆ†æï¼ˆå…è´¹ï¼‰

åœ¨ç”Ÿæˆä»»ä½•è§†è§‰å†…å®¹ä¹‹å‰ï¼Œå…ˆéªŒè¯æç¤ºè¯è´¨é‡ï¼š

```bash
/video-validate health-app-intro --skip-l1
```

**æ£€æŸ¥é¡¹ç›®ï¼š**
- âœ… åœºæ™¯æè¿°å®Œæ•´æ€§ï¼ˆç¯å¢ƒã€æ°›å›´ã€å…‰çº¿ï¼‰
- âœ… äººç‰©/å¯¹è±¡æè¿°ï¼ˆå¤–è§‚ã€åŠ¨ä½œã€è¡¨æƒ…ï¼‰
- âœ… è§†è§‰é£æ ¼ä¸€è‡´æ€§
- âœ… æŠ€æœ¯å¯è¡Œæ€§
- âœ… æç¤ºè¯ä¼˜åŒ–å»ºè®®

**è¾“å‡ºç¤ºä¾‹ï¼š**
```
ğŸ“Š L0 æç¤ºè¯è´¨é‡åˆ†æ:
  åœºæ™¯1ï¼ˆéƒ½å¸‚å‹åŠ›ï¼‰: 72/100 åˆ†
    âš ï¸ å»ºè®®æ·»åŠ å…·ä½“çš„è§†è§‰é£æ ¼æè¿°
    âš ï¸ å»ºè®®æ˜ç¡®æ—¶é—´ï¼ˆç™½å¤©/å¤œæ™šï¼‰

  åœºæ™¯2ï¼ˆAPPç•Œé¢ï¼‰: 85/100 åˆ†
    âœ… ç•Œé¢å…ƒç´ æè¿°æ¸…æ™°
    ğŸ’¡ å¯å¢åŠ åŠ¨ç”»æ•ˆæœæè¿°

  å¹³å‡åˆ†æ•°: 78.5/100
  å»ºè®®ï¼šä¼˜åŒ–åœºæ™¯1çš„æè¿°åå†ç»§ç»­
```

### 3.2 L1çº§éªŒè¯ - é™æ€å›¾åƒé¢„è§ˆï¼ˆçº¦6å…ƒï¼‰

é€šè¿‡ç”Ÿæˆå…³é”®å¸§å›¾åƒï¼Œé¢„è§ˆè§†è§‰æ•ˆæœï¼š

```bash
/video-validate health-app-intro
```

**éªŒè¯å†…å®¹ï¼š**
- ğŸ¨ è§†è§‰é£æ ¼æ˜¯å¦ç¬¦åˆå“ç‰Œè°ƒæ€§
- ğŸï¸ åœºæ™¯æ°›å›´æ˜¯å¦æ­£ç¡®
- ğŸ­ äººç‰©/ç•Œé¢å‘ˆç°æ˜¯å¦æ¸…æ™°
- ğŸŒˆ è‰²å½©æ­é…æ˜¯å¦å’Œè°

**å†³ç­–ç‚¹ï¼š**
- è§†è§‰æ•ˆæœæ»¡æ„ â†’ ç»§ç»­åˆ°L2
- éœ€è¦è°ƒæ•´ â†’ ä¿®æ”¹æç¤ºè¯ï¼Œé‡æ–°L1éªŒè¯
- é£æ ¼å®Œå…¨é”™è¯¯ â†’ è¿”å›è§„æ ¼å®šä¹‰é˜¶æ®µ

### 3.3 L2çº§éªŒè¯ - åŠ¨æ€é¢„è§ˆï¼ˆçº¦28å…ƒï¼‰

é€‰æ‹©æœ€å…³é”®çš„åœºæ™¯ç”Ÿæˆ10ç§’æµ‹è¯•è§†é¢‘ï¼š

```bash
/video-preview health-app-intro --scene 1 --with-audio
```

**é€‰æ‹©ç­–ç•¥ï¼š**
- å¼€åœºåœºæ™¯ï¼šéªŒè¯æ•´ä½“å¸å¼•åŠ›
- æ ¸å¿ƒåŠŸèƒ½åœºæ™¯ï¼šéªŒè¯äº§å“å±•ç¤ºæ•ˆæœ
- CTAåœºæ™¯ï¼šéªŒè¯è½¬åŒ–å…ƒç´ 

**éªŒè¯è¦ç‚¹ï¼š**
- ğŸ¬ åŠ¨ç”»æµç•…åº¦
- ğŸµ éŸ³ç”»åŒæ­¥
- ğŸ’¬ ä¿¡æ¯ä¼ è¾¾æ¸…æ™°åº¦
- âœ¨ è½¬åœºæ•ˆæœ

### 3.4 æˆæœ¬æ§åˆ¶å†³ç­–æ ‘

```mermaid
graph TD
    A[å¼€å§‹] --> B{L0åˆ†æ•°â‰¥80?}
    B -->|å¦| C[ä¼˜åŒ–æç¤ºè¯]
    C --> B
    B -->|æ˜¯| D[L1å›¾åƒé¢„è§ˆ]
    D --> E{è§†è§‰æ»¡æ„?}
    E -->|å¦| F[è°ƒæ•´é£æ ¼]
    F --> D
    E -->|æ˜¯| G[L2åŠ¨æ€é¢„è§ˆ]
    G --> H{æ•ˆæœæ»¡æ„?}
    H -->|å¦| I[å¾®è°ƒå‚æ•°]
    I --> G
    H -->|æ˜¯| J[ç”Ÿæˆå®Œæ•´è§†é¢‘]

    style J fill:#9f9,stroke:#333,stroke-width:2px
```

**æˆæœ¬ç´¯è®¡ï¼š**
- ä»…L0ä¼˜åŒ–ï¼š0å…ƒ
- L0+L1éªŒè¯ï¼š6å…ƒ
- L0+L1+L2éªŒè¯ï¼š34å…ƒ
- å®Œæ•´æµç¨‹ï¼š204å…ƒï¼ˆvs ä¼ ç»Ÿ510-850å…ƒï¼‰

## é˜¶æ®µå››ï¼šä»»åŠ¡åˆ†è§£ä¸æ‰§è¡Œ

### 3.1 ä½¿ç”¨ /video-tasks å‘½ä»¤

å°†æŠ€æœ¯æ–¹æ¡ˆåˆ†è§£ä¸ºå¯æ‰§è¡Œçš„ä»»åŠ¡åˆ—è¡¨ã€‚

```bash
movieflow video-tasks specs/001-health-app-intro
```

#### ç”Ÿæˆä»»åŠ¡åˆ—è¡¨

åˆ›å»º `specs/001-health-app-intro/tasks.md`ï¼š

```markdown
# ä»»åŠ¡åˆ—è¡¨

## ç´ æå‡†å¤‡ [P0-ç´§æ€¥]
- [ ] æ”¶é›†APPç•Œé¢æˆªå›¾
- [ ] å‡†å¤‡å“ç‰ŒLOGOï¼ˆPNGæ ¼å¼ï¼‰
- [ ] ç¡®è®¤å“ç‰Œè‰²å½©å€¼ï¼ˆ#HEXï¼‰

## åœºæ™¯ç”Ÿæˆ [P1-é‡è¦]
- [ ] ç”Ÿæˆåœºæ™¯1ï¼šéƒ½å¸‚å‹åŠ›ç”»é¢
- [ ] ç”Ÿæˆåœºæ™¯2ï¼šAPPç•Œé¢å±•ç¤º
- [ ] ç”Ÿæˆåœºæ™¯3ï¼šæ•°æ®å¯è§†åŒ–åŠ¨ç”»
- [ ] ç”Ÿæˆåœºæ™¯4ï¼šAIæ¨èç•Œé¢
- [ ] ç”Ÿæˆåœºæ™¯5ï¼šç”¨æˆ·testimonial
- [ ] ç”Ÿæˆåœºæ™¯6ï¼šCTAç”»é¢

## éŸ³é¢‘åˆ¶ä½œ [P1-é‡è¦]
- [ ] é€‰æ‹©èƒŒæ™¯éŸ³ä¹
- [ ] å½•åˆ¶é…éŸ³ï¼ˆæˆ–TTSç”Ÿæˆï¼‰
- [ ] éŸ³é¢‘æ··éŸ³å¤„ç†

## åæœŸåˆæˆ [P2-å¸¸è§„]
- [ ] åœºæ™¯æ‹¼æ¥
- [ ] æ·»åŠ è½¬åœºæ•ˆæœ
- [ ] é¢œè‰²æ ¡æ­£
- [ ] æ·»åŠ å­—å¹•
- [ ] éŸ³è§†é¢‘åŒæ­¥

## è´¨é‡æ£€æŸ¥ [P2-å¸¸è§„]
- [ ] æ—¶é•¿ç²¾ç¡®åº¦ï¼ˆÂ±0.5ç§’ï¼‰
- [ ] ç”»é¢æµç•…åº¦
- [ ] éŸ³é¢‘æ¸…æ™°åº¦
- [ ] æ–‡å­—å¯è¯»æ€§

## å¤šå¹³å°é€‚é… [P3-å¯é€‰]
- [ ] æŠ–éŸ³ç‰ˆæœ¬ï¼ˆ9:16ï¼‰
- [ ] è§†é¢‘å·ç‰ˆæœ¬ï¼ˆ9:16ï¼‰
- [ ] Bç«™ç‰ˆæœ¬ï¼ˆ16:9ï¼‰
```

### 3.2 ä»»åŠ¡æ‰§è¡Œé¡ºåº

```mermaid
graph LR
    A[ç´ æå‡†å¤‡] --> B[åœºæ™¯ç”Ÿæˆ]
    B --> C[éŸ³é¢‘åˆ¶ä½œ]
    C --> D[åæœŸåˆæˆ]
    D --> E[è´¨é‡æ£€æŸ¥]
    E --> F[å¹³å°é€‚é…]
```

## é˜¶æ®µå››ï¼šè§†é¢‘ç”Ÿæˆ

### 4.1 ä½¿ç”¨ /video-generate å‘½ä»¤

æ‰§è¡Œå…·ä½“çš„è§†é¢‘ç”Ÿæˆä»»åŠ¡ã€‚

#### å•åœºæ™¯ç”Ÿæˆ

```bash
movieflow video-generate specs/001-health-app-intro --scene 1
```

#### æ‰¹é‡ç”Ÿæˆ

```bash
movieflow video-generate specs/001-health-app-intro --all-scenes
```

#### å®æ—¶é¢„è§ˆ

```bash
movieflow video-generate specs/001-health-app-intro --preview
```

### 4.2 ç”Ÿæˆæµç¨‹

```python
# ä¼ªä»£ç å±•ç¤ºç”Ÿæˆæµç¨‹
def generate_video(spec_path, options):
    # 1. åŠ è½½è§„æ ¼å’Œè®¡åˆ’
    spec = load_spec(spec_path)
    plan = load_plan(spec_path)

    # 2. åˆå§‹åŒ–ç”Ÿæˆå™¨
    volcano = VolcanoEngine(api_key=VOLCANO_KEY)
    gemini = GeminiGenerator(api_key=GEMINI_KEY)

    # 3. ç”Ÿæˆå„åœºæ™¯
    scenes = []
    for scene in spec.scenes:
        if scene.generator == "volcano":
            result = volcano.generate(scene)
        elif scene.generator == "gemini":
            result = gemini.generate(scene)
        scenes.append(result)

    # 4. åˆæˆè§†é¢‘
    video = compose_scenes(scenes, plan.transitions)

    # 5. æ·»åŠ éŸ³é¢‘
    video = add_audio(video, plan.audio)

    # 6. è¾“å‡ºç»“æœ
    save_video(video, f"{spec_path}/output/final.mp4")
```

### 4.3 ç”Ÿæˆç›‘æ§

é€šè¿‡ WebSocket å®æ—¶ç›‘æ§ç”Ÿæˆè¿›åº¦ï¼š

```javascript
const ws = new WebSocket('ws://localhost:8000/ws/generation');

ws.onmessage = (event) => {
    const data = JSON.parse(event.data);
    console.log(`åœºæ™¯ ${data.scene}: ${data.progress}%`);
};
```

## é˜¶æ®µäº”ï¼šè´¨é‡ä¿è¯

### 5.1 è‡ªåŠ¨è´¨é‡æ£€æŸ¥

ç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æŸ¥ï¼š

```yaml
quality_checks:
  duration:
    target: 30s
    tolerance: Â±0.5s
    status: âœ… PASS

  resolution:
    target: 1920x1080
    actual: 1920x1080
    status: âœ… PASS

  framerate:
    target: 30fps
    actual: 30fps
    status: âœ… PASS

  audio_sync:
    offset: 0.02s
    threshold: 0.1s
    status: âœ… PASS
```

### 5.2 äººå·¥å®¡æ ¸è¦ç‚¹

- **å†…å®¹å‡†ç¡®æ€§**ï¼šä¿¡æ¯æ˜¯å¦å‡†ç¡®
- **å“ç‰Œä¸€è‡´æ€§**ï¼šè‰²å½©ã€å­—ä½“ã€é£æ ¼
- **ç”¨æˆ·ä½“éªŒ**ï¼šèŠ‚å¥ã€ç†è§£éš¾åº¦
- **å¹³å°è§„èŒƒ**ï¼šæ˜¯å¦ç¬¦åˆå¹³å°è¦æ±‚

## é˜¶æ®µå…­ï¼šè¾“å‡ºä¸å‘å¸ƒ

### 6.1 å¤šæ ¼å¼è¾“å‡º

```bash
# å¯¼å‡ºä¸åŒæ ¼å¼
movieflow export specs/001-health-app-intro --format mp4
movieflow export specs/001-health-app-intro --format webm
movieflow export specs/001-health-app-intro --format gif
```

### 6.2 å¹³å°ä¼˜åŒ–

```bash
# é’ˆå¯¹ç‰¹å®šå¹³å°ä¼˜åŒ–
movieflow optimize specs/001-health-app-intro --platform douyin
movieflow optimize specs/001-health-app-intro --platform wechat
movieflow optimize specs/001-health-app-intro --platform bilibili
```

### 6.3 æ‰¹é‡å‘å¸ƒ

```bash
# è‡ªåŠ¨å‘å¸ƒåˆ°å¤šå¹³å°
movieflow publish specs/001-health-app-intro --platforms douyin,wechat,bilibili
```

## æœ€ä½³å®è·µ

### 1. è¿­ä»£ä¼˜åŒ–

```mermaid
graph TD
    A[åˆç‰ˆç”Ÿæˆ] --> B[æ•ˆæœè¯„ä¼°]
    B --> C{æ»¡æ„?}
    C -->|å¦| D[è°ƒæ•´è§„æ ¼]
    D --> A
    C -->|æ˜¯| E[æœ€ç»ˆè¾“å‡º]
```

### 2. æ¨¡æ¿å¤ç”¨

```bash
# ä¿å­˜ä¸ºæ¨¡æ¿
movieflow save-template specs/001-health-app-intro --name "äº§å“ä»‹ç»æ¨¡æ¿"

# åŸºäºæ¨¡æ¿åˆ›å»ºæ–°é¡¹ç›®
movieflow video-specify "æ–°äº§å“ä»‹ç»" --template "äº§å“ä»‹ç»æ¨¡æ¿"
```

### 3. A/B æµ‹è¯•

```bash
# ç”Ÿæˆå¤šä¸ªç‰ˆæœ¬
movieflow video-generate specs/001-health-app-intro --variant A
movieflow video-generate specs/001-health-app-intro --variant B

# å¯¹æ¯”æ•ˆæœ
movieflow compare specs/001-health-app-intro/variants/
```

## é«˜çº§åŠŸèƒ½

### 1. è‡ªå®šä¹‰ç”Ÿæˆå™¨

```python
from movieflow.generators import BaseGenerator

class CustomGenerator(BaseGenerator):
    def generate(self, scene_spec):
        # è‡ªå®šä¹‰ç”Ÿæˆé€»è¾‘
        pass

# æ³¨å†Œç”Ÿæˆå™¨
movieflow.register_generator("custom", CustomGenerator)
```

### 2. æ’ä»¶ç³»ç»Ÿ

```bash
# å®‰è£…æ’ä»¶
movieflow plugin install movieflow-effects

# ä½¿ç”¨æ’ä»¶åŠŸèƒ½
movieflow video-generate --effect glitch
```

### 3. æ‰¹å¤„ç†æ¨¡å¼

```bash
# æ‰¹é‡å¤„ç†å¤šä¸ªé¡¹ç›®
movieflow batch process specs/batch-list.txt
```

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

| é—®é¢˜ | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|------|------|----------|
| ç”Ÿæˆè¶…æ—¶ | ç½‘ç»œæˆ–APIé™åˆ¶ | è°ƒæ•´è¶…æ—¶è®¾ç½®æˆ–ä½¿ç”¨é˜Ÿåˆ— |
| ç”»é¢é—ªçƒ | å¸§ç‡ä¸ä¸€è‡´ | ç»Ÿä¸€æ‰€æœ‰ç´ æå¸§ç‡ |
| éŸ³ç”»ä¸åŒæ­¥ | ç¼–ç é—®é¢˜ | é‡æ–°ç¼–ç æˆ–è°ƒæ•´åç§» |
| æ–‡å­—æ¨¡ç³Š | åˆ†è¾¨ç‡è¿‡ä½ | æé«˜è¾“å‡ºåˆ†è¾¨ç‡ |
| é¢œè‰²å¤±çœŸ | è‰²å½©ç©ºé—´ä¸åŒ¹é… | ç»Ÿä¸€ä½¿ç”¨sRGB |

### è°ƒè¯•æ¨¡å¼

```bash
# å¯ç”¨è°ƒè¯•è¾“å‡º
movieflow video-generate --debug

# ä¿å­˜ä¸­é—´æ–‡ä»¶
movieflow video-generate --keep-temp

# ç”Ÿæˆæ—¥å¿—æŠ¥å‘Š
movieflow video-generate --log-level DEBUG
```

## æ€§èƒ½ä¼˜åŒ–

### 1. å¹¶è¡Œå¤„ç†

```yaml
# config.yaml
generation:
  parallel_scenes: 3
  max_workers: 6
  cache_enabled: true
```

### 2. ç¼“å­˜ç­–ç•¥

```bash
# å¯ç”¨ç¼“å­˜
movieflow config set cache.enabled true

# æ¸…ç†ç¼“å­˜
movieflow cache clear

# é¢„çƒ­ç¼“å­˜
movieflow cache warm specs/001-health-app-intro
```

### 3. èµ„æºç®¡ç†

```bash
# é™åˆ¶å†…å­˜ä½¿ç”¨
movieflow config set limits.memory 4GB

# é™åˆ¶CPUä½¿ç”¨
movieflow config set limits.cpu_cores 4
```

## ä¸ Spec-Kit é›†æˆ

MovieFlow å¯ä»¥ä¸ Spec-Kit æ— ç¼é›†æˆï¼š

```bash
# åœ¨ Spec-Kit é¡¹ç›®ä¸­
specify init video-project --ai claude

# ç”Ÿæˆè§†é¢‘è§„æ ¼
specify execute "åˆ›å»ºäº§å“ä»‹ç»è§†é¢‘è§„æ ¼"

# åˆ‡æ¢åˆ° MovieFlow
movieflow video-plan ../spec-kit/specs/001-video/spec.md
movieflow video-generate ../spec-kit/specs/001-video/
```

## æ€»ç»“

MovieFlow é€šè¿‡å‚è€ƒ Spec-Kit çš„æ–¹æ³•è®ºï¼Œæä¾›äº†å®Œæ•´çš„ AI è§†é¢‘ç”Ÿæˆå·¥ä½œæµï¼š

1. **è§„æ ¼é©±åŠ¨**ï¼šä»éœ€æ±‚åˆ°è§„æ ¼çš„æ ‡å‡†åŒ–
2. **åˆ†å±‚è®¾è®¡**ï¼šè§„æ ¼â†’è®¡åˆ’â†’ä»»åŠ¡â†’æ‰§è¡Œ
3. **è´¨é‡ä¿è¯**ï¼šè‡ªåŠ¨æ£€æŸ¥ + äººå·¥å®¡æ ¸
4. **æŒç»­ä¼˜åŒ–**ï¼šè¿­ä»£æ”¹è¿› + A/Bæµ‹è¯•

è®°ä½æ ¸å¿ƒåŸåˆ™ï¼š
- **è§„æ ¼å…ˆè¡Œ**ï¼šå…ˆå®šä¹‰æ¸…æ™°çš„è§„æ ¼
- **é€æ­¥ç»†åŒ–**ï¼šä»æŠ½è±¡åˆ°å…·ä½“
- **å¿«é€Ÿè¿­ä»£**ï¼šå°æ­¥å¿«è·‘ï¼ŒæŒç»­æ”¹è¿›
- **è´¨é‡ç¬¬ä¸€**ï¼šå®ç¼ºæ¯‹æ»¥

---

ğŸ“š ç›¸å…³æ–‡æ¡£ï¼š[APIæ–‡æ¡£](api.md) | [æœ¬åœ°å¼€å‘](local-development.md) | [äº§å“éœ€æ±‚](PRD.md)