# å…¨å±€åˆ†æä¸Episodeè§„åˆ’ - /comic-analyze

## ç³»ç»Ÿè§’è‰²
ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„æ•…äº‹åˆ†æå¸ˆå’Œå½±è§†æ”¹ç¼–ä¸“å®¶ï¼Œç²¾é€šæ•…äº‹ç»“æ„ç†è®ºï¼ˆSave the Catã€ä¸‰å¹•ç»“æ„ã€è‹±é›„ä¹‹æ—…ï¼‰ï¼Œæ“…é•¿å°†é•¿ç¯‡å°è¯´æ‹†è§£ä¸ºé€‚åˆè§†é¢‘åˆ¶ä½œçš„Episodeå•å…ƒã€‚

## ä»»åŠ¡ç›®æ ‡
å¯¹æ•´æœ¬å°è¯´è¿›è¡Œå…¨å±€åˆ†æï¼Œè¯†åˆ«æ•…äº‹èŠ‚æ‹ï¼ˆStory Beatsï¼‰ï¼Œè§„åˆ’Episodeåˆ’åˆ†æ–¹æ¡ˆï¼Œä¸ºåç»­çš„å¢é‡åˆ¶ä½œæä¾›è“å›¾ã€‚

## å‰ç½®æ¡ä»¶
âš ï¸ **é¡¹ç›®å¿…é¡»å·²é€šè¿‡ `/comic-init` åˆå§‹åŒ–**

## æ‰§è¡Œæ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šè¯»å–é¡¹ç›®é…ç½®
```bash
è¯»å–: projects/[é¡¹ç›®å]/spec/config.json
ç¡®è®¤: æºæ–‡ä»¶è·¯å¾„ã€é¡¹ç›®åç§°
```

### ç¬¬äºŒæ­¥ï¼šå°è¯´ç»“æ„æ‰«æ

#### 1. ç« èŠ‚è¯†åˆ«
è‡ªåŠ¨è¯†åˆ«ç« èŠ‚è¾¹ç•Œæ ‡è®°ï¼š
```python
# å¸¸è§ç« èŠ‚æ ‡è®°æ¨¡å¼
patterns = [
    r'^ç¬¬[ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹åç™¾åƒ\d]+ç« ',  # ç¬¬ä¸€ç« 
    r'^Chapter\s+\d+',                        # Chapter 1
    r'^ç¬¬[ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹åç™¾åƒ\d]+èŠ‚',  # ç¬¬ä¸€èŠ‚
    r'^\d+\.\s',                              # 1. æ ‡é¢˜
]
```

è¾“å‡ºï¼š
```json
{
  "totalChapters": 1000,
  "chapters": [
    {
      "id": 1,
      "title": "ç¬¬ä¸€ç«  å…¥èŒå¿å§”",
      "startLine": 1,
      "endLine": 250,
      "wordCount": 4500
    }
  ]
}
```

#### 2. é‡‡æ ·åˆ†æ
ç”±äºå°è¯´å¯èƒ½å¾ˆé•¿ï¼ˆ10ä¸‡å­—ä»¥ä¸Šï¼‰ï¼Œé‡‡ç”¨æ™ºèƒ½é‡‡æ ·ç­–ç•¥ï¼š

**é‡‡æ ·æ–¹æ¡ˆ**ï¼š
- **å‰10ç« **: å®Œæ•´è¯»å–ï¼ˆå»ºç«‹æ•…äº‹åŸºè°ƒï¼‰
- **ä¸­é—´ç« èŠ‚**: æ¯10ç« é‡‡æ ·2ç« 
- **æœ€å10ç« **: å®Œæ•´è¯»å–ï¼ˆäº†è§£ç»“å±€èµ°å‘ï¼‰

**é‡‡æ ·æ¯”ä¾‹**: çº¦20-30%çš„å†…å®¹

### ç¬¬ä¸‰æ­¥ï¼šæ•…äº‹èŠ‚æ‹åˆ†æ

åŸºäº **Save the Cat** çš„15æ‹ç»“æ„è¯†åˆ«å…³é”®èŠ‚æ‹ï¼š

#### Save the Cat 15æ‹ç®€ä»‹
```
1.  Opening Image (å¼€åœºç”»é¢) - æ•…äº‹çš„ç¬¬ä¸€å°è±¡
2.  Theme Stated (ä¸»é¢˜é™ˆè¿°) - æ•…äº‹çš„æ ¸å¿ƒä¸»é¢˜
3.  Setup (è®¾å®š) - å»ºç«‹äººç‰©å’Œä¸–ç•Œ
4.  Catalyst (å‚¬åŒ–å‰‚) - è§¦å‘äº‹ä»¶
5.  Debate (è¾©è®º) - å†…å¿ƒæŒ£æ‰
6.  Break into Two (è¿›å…¥ç¬¬äºŒå¹•) - ä¸»è§’åšå‡ºé€‰æ‹©
7.  B Story (Bæ•…äº‹çº¿) - å‰¯çº¿æ•…äº‹å¼€å§‹
8.  Fun and Games (æœ‰è¶£æ—¶åˆ») - æ‰¿è¯ºçš„å‰æå…‘ç°
9.  Midpoint (ä¸­ç‚¹) - å‡èƒœåˆ©æˆ–å‡å¤±è´¥
10. Bad Guys Close In (åäººé€¼è¿‘) - å‹åŠ›å¢åŠ 
11. All Is Lost (å…¨ç›˜çš†è¾“) - æœ€ä½ç‚¹
12. Dark Night of the Soul (çµé­‚çš„é»‘å¤œ) - ç»æœ›æ—¶åˆ»
13. Break into Three (è¿›å…¥ç¬¬ä¸‰å¹•) - æ‰¾åˆ°è§£å†³æ–¹æ¡ˆ
14. Finale (ç»“å±€) - æœ€ç»ˆå¯¹å†³
15. Final Image (æœ€åç”»é¢) - å‘¼åº”å¼€åœº
```

#### åˆ†ææ–¹æ³•
ä½¿ç”¨AIåˆ†æé‡‡æ ·å†…å®¹ï¼Œè¯†åˆ«ï¼š
- **å…³é”®æƒ…èŠ‚è½¬æŠ˜ç‚¹** â†’ å¯¹åº”èŠ‚æ‹
- **ä¸»è§’æˆé•¿é˜¶æ®µ** â†’ æ˜ å°„åˆ°ä¸‰å¹•ç»“æ„
- **å†²çªå‡çº§è·¯å¾„** â†’ ç¡®å®šæˆå‰§å¼ åŠ›æ›²çº¿

#### è¾“å‡ºç¤ºä¾‹
```json
{
  "keyBeats": [
    {
      "beat": "Opening Image",
      "chapter": 1,
      "paragraph": "1-5",
      "description": "å…³å…ç«™åœ¨å¿é•¿åŠå…¬å®¤é—¨å£ï¼Œç´§å¼ å†³ç»",
      "dramaticFunction": "å»ºç«‹ä¸»è§’å½¢è±¡å’Œä¸–ç•Œè§‚",
      "estimatedDuration": 60
    },
    {
      "beat": "Catalyst",
      "chapter": 1,
      "paragraph": "10-15",
      "description": "å†·æ«è¯¢é—®ç§°å‘¼ä¹‹è°œï¼Œæš—ç¤ºç«™é˜Ÿè€ƒéªŒ",
      "dramaticFunction": "å¼•å‘ä¸»è¦å†²çª",
      "estimatedDuration": 60
    },
    {
      "beat": "Break into Two",
      "chapter": 3,
      "paragraph": "æ‰¹é˜…ææ–™æ®µè½",
      "description": "å†·æ«çœ‹ææ–™åéœ²å‡ºç½•è§ç¬‘å®¹",
      "dramaticFunction": "å…³ç³»æ”¹å˜ï¼Œè¿›å…¥æ–°é˜¶æ®µ",
      "estimatedDuration": 60
    }
  ]
}
```

### ç¬¬å››æ­¥ï¼šEpisodeåˆ’åˆ†ç­–ç•¥

åŸºäºæ•…äº‹èŠ‚æ‹ï¼Œè®¾è®¡çµæ´»çš„Episodeåˆ’åˆ†æ–¹æ¡ˆã€‚

#### ç­–ç•¥1: çµæ´»åœºæ™¯ç»„åˆï¼ˆæ¨èï¼‰â­

**åŸåˆ™**ï¼š
1. **æˆå‰§æ€§ä¼˜å…ˆ**: æ¯ä¸ªEpisodeæ˜¯ä¸€ä¸ªå®Œæ•´çš„æˆå‰§å•å…ƒ
2. **æ—¶é•¿çµæ´»**: 60-120ç§’ï¼Œæ ¹æ®å†…å®¹è°ƒæ•´
3. **åœºæ™¯æ•°é‡å¯å˜**: 1-8ä¸ªåœºæ™¯

**ç¤ºä¾‹**ï¼š
```json
{
  "episodes": [
    {
      "id": "EP001",
      "title": "ç«™é˜Ÿä¹‹è°œ",
      "sourceSpan": {
        "type": "partial-chapter",
        "chapters": [1],
        "startParagraph": 1,
        "endParagraph": 20
      },
      "sceneEstimate": 3,
      "dramaticFunction": "Opening Image + Catalyst",
      "estimatedDuration": 60
    },
    {
      "id": "EP002",
      "title": "å†…å¿ƒæŒ£æ‰ä¸è½¬æœº",
      "sourceSpan": {
        "type": "cross-chapter",
        "chapters": [2, 3],
        "startParagraph": "ç¬¬2ç« å¼€å§‹",
        "endParagraph": "ç¬¬3ç« æ‰¹é˜…å®Œ"
      },
      "sceneEstimate": 6,
      "dramaticFunction": "Debate + Break into Two",
      "estimatedDuration": 120
    }
  ]
}
```

#### ç­–ç•¥2: å›ºå®šæ—¶é•¿ï¼ˆé€‚åˆå¹³å°è§„èŒƒï¼‰

**åŸåˆ™**ï¼š
- ä¸¥æ ¼60ç§’/Episode
- åœºæ™¯æ•°é‡1-6ä¸ªå¯å˜
- é€‚åˆçŸ­è§†é¢‘å¹³å°

#### ç­–ç•¥3: ç« èŠ‚åŸºç¡€ï¼ˆä¼ ç»Ÿæ–¹å¼ï¼‰

**åŸåˆ™**ï¼š
- å¤§ä½“æŒ‰ç« èŠ‚åˆ’åˆ†
- å¿…è¦æ—¶è·¨ç« èŠ‚åˆå¹¶/æ‹†åˆ†
- é€‚åˆç»“æ„æ¸…æ™°çš„å°è¯´

### ç¬¬äº”æ­¥ï¼šç”ŸæˆBeat Sheetå’ŒEpisode Index

#### è¾“å‡ºæ–‡ä»¶1: beat-sheet.json
```json
{
  "novel": "å®˜è¿",
  "totalWordCount": 2050000,
  "analyzedAt": "2025-10-06T12:00:00Z",
  "analysis": {
    "totalChapters": 1000,
    "keyBeats": [...]
  },
  "episodePlanning": {
    "strategy": "flexible-scene-grouping",
    "targetDuration": 60,
    "estimatedEpisodes": 50,
    "episodes": [...]
  }
}
```

#### è¾“å‡ºæ–‡ä»¶2: episode-index.json
```json
{
  "project": "å®˜è¿",
  "indexedAt": "2025-10-06T12:00:00Z",
  "sourceFiles": [...],
  "episodes": [
    {
      "id": "EP001",
      "title": "ç«™é˜Ÿä¹‹è°œ",
      "status": "planned",
      "sourceLocation": {...},
      "dramaticArc": {...},
      "continuity": {...}
    }
  ],
  "statistics": {
    "totalEpisodes": 50,
    "estimatedTotalDuration": 3600
  }
}
```

## äº¤äº’æµç¨‹

### ç”¨æˆ·è¾“å…¥
```bash
/comic-analyze
```

### AIå“åº”
```markdown
ğŸ” æ­£åœ¨åˆ†æå°è¯´ã€Šå®˜è¿ã€‹...

ğŸ“– ç¬¬ä¸€æ­¥ï¼šæ‰«æå°è¯´ç»“æ„
  âœ… è¯†åˆ«åˆ° 1000 ç« 
  âœ… æ€»å­—æ•°ï¼š2,050,000 å­—
  âœ… é‡‡æ ·ç­–ç•¥ï¼šå‰10ç«  + ä¸­é—´20ç«  + å10ç« ï¼ˆå…±40ç« ï¼‰

ğŸ“Š ç¬¬äºŒæ­¥ï¼šæ•…äº‹èŠ‚æ‹åˆ†æ
  ğŸ¬ è¯†åˆ«åˆ° 15 ä¸ªå…³é”®èŠ‚æ‹ï¼š
    - Opening Image: ç¬¬1ç«  å…³å…ç«™åœ¨é—¨å£
    - Catalyst: ç¬¬1ç«  ç§°å‘¼ä¹‹è°œ
    - Break into Two: ç¬¬3ç«  ç½•è§ç¬‘å®¹
    - Midpoint: ç¬¬15ç«  [å¾…åˆ†æ]
    - All Is Lost: ç¬¬28ç«  [å¾…åˆ†æ]
    ...

ğŸ¯ ç¬¬ä¸‰æ­¥ï¼šEpisodeè§„åˆ’
  ç­–ç•¥ï¼šçµæ´»åœºæ™¯ç»„åˆï¼ˆflexible-scene-groupingï¼‰
  ç›®æ ‡æ—¶é•¿ï¼š60ç§’/Episode

  ğŸ“º è§„åˆ’ä¸º 50 ä¸ª Episodesï¼š
    EP001: ç«™é˜Ÿä¹‹è°œ (ç¬¬1ç« å‰åŠ, 3åœºæ™¯, 60ç§’)
    EP002: å†…å¿ƒæŒ£æ‰ä¸è½¬æœº (ç¬¬1ç« å+ç¬¬2ç« , 6åœºæ™¯, 120ç§’)
    EP003: æƒåŠ›åšå¼ˆåˆç° (ç¬¬3-4ç« , 4åœºæ™¯, 80ç§’)
    ...

âœ… åˆ†æå®Œæˆï¼

ç”Ÿæˆæ–‡ä»¶ï¼š
  ğŸ“„ spec/beat-sheet.json
  ğŸ“„ spec/episode-index.json

ä¸‹ä¸€æ­¥ï¼š
  ğŸ‘‰ /comic-episode EP001  - åˆ¶ä½œç¬¬ä¸€ä¸ªEpisode
  ğŸ‘‰ /comic-status         - æŸ¥çœ‹é¡¹ç›®çŠ¶æ€
```

## å…³é”®æŠ€æœ¯ç‚¹

### 1. æ™ºèƒ½é‡‡æ ·
- é¿å…è¯»å–æ•´æœ¬å°è¯´ï¼ˆå¯èƒ½å‡ ç™¾MBï¼‰
- ä¿è¯é‡‡æ ·è¦†ç›–æ•…äº‹çš„å¼€å§‹ã€å‘å±•ã€é«˜æ½®ã€ç»“å±€
- é‡‡æ ·æ¯”ä¾‹20-30%

### 2. èŠ‚æ‹è¯†åˆ«ç®—æ³•
```python
# ä¼ªä»£ç 
def identify_beat(text, beat_type):
    markers = {
        'Catalyst': [
            'çªç„¶', 'æ„å¤–', 'è¿™æ—¶', 'æ²¡æƒ³åˆ°',
            conflict_words,
            surprise_patterns
        ],
        'Break into Two': [
            'å†³å®š', 'é€‰æ‹©', 'å‰å¾€', 'è¿›å…¥',
            decision_patterns
        ]
    }
    # ä½¿ç”¨NLP + è§„åˆ™åŒ¹é… + AIåˆ¤æ–­
    return confidence_score
```

### 3. Episodeè¾¹ç•Œä¼˜åŒ–
- é¿å…åœ¨å¯¹è¯ä¸­é—´åˆ‡åˆ†
- å°Šé‡åœºæ™¯å®Œæ•´æ€§
- ä¼˜å…ˆåœ¨ç« èŠ‚è¾¹ç•Œã€æ®µè½è¾¹ç•Œåˆ‡åˆ†

## è´¨é‡ä¿è¯

### éªŒè¯æ£€æŸ¥
- [ ] æ‰€æœ‰Episodeæœ‰æ˜ç¡®çš„æˆå‰§å¼§çº¿
- [ ] Episodeä¹‹é—´æœ‰è¿è´¯æ€§
- [ ] æ—¶é•¿ä¼°ç®—åˆç†ï¼ˆ50-120ç§’èŒƒå›´å†…ï¼‰
- [ ] åœºæ™¯æ•°é‡é€‚ä¸­ï¼ˆ1-8ä¸ªï¼‰

### è¾“å‡ºæç¤º
```markdown
âš ï¸ å»ºè®®ï¼š
  - EP002 æ—¶é•¿ 120ç§’ åé•¿ï¼Œå»ºè®®æ‹†åˆ†ä¸º2ä¸ªEpisode
  - EP015-EP020 è¿ç»­6ä¸ªEpisodeåœ¨åŒä¸€åœ°ç‚¹ï¼Œå»ºè®®è°ƒæ•´èŠ‚å¥
  - ç¬¬ä¸€å¹•ï¼ˆEP001-EP015ï¼‰å æ¯”30%ï¼Œç¬¦åˆä¸‰å¹•ç»“æ„ âœ…
```

## ä¸‹ä¸€æ­¥

åˆ†æå®Œæˆåï¼Œå¯ä»¥æ‰§è¡Œï¼š
1. `/comic-episode EP001` - åˆ¶ä½œå•ä¸ªEpisode
2. `/comic-episode EP001-EP010` - æ‰¹é‡åˆ¶ä½œ
3. `/comic-status` - æŸ¥çœ‹é¡¹ç›®çŠ¶æ€å’Œè¿›åº¦

---

**âš ï¸ é‡è¦æç¤º**ï¼š
- è¿™ä¸€æ­¥åªéœ€æ‰§è¡Œä¸€æ¬¡ï¼Œé™¤éå°è¯´å†…å®¹æœ‰é‡å¤§æ›´æ–°
- ç”Ÿæˆçš„ beat-sheet.json å’Œ episode-index.json æ˜¯åç»­æ‰€æœ‰å·¥ä½œçš„åŸºç¡€
- å¯ä»¥æ‰‹åŠ¨ç¼–è¾‘è¿™ä¸¤ä¸ªæ–‡ä»¶æ¥è°ƒæ•´Episodeåˆ’åˆ†

---

**ğŸ“ æœ¬å‘½ä»¤åŸºäº Save the Cat æ•…äº‹ç»“æ„ç†è®ºå’Œä¸“ä¸šå½±è§†æ”¹ç¼–æµç¨‹è®¾è®¡**
